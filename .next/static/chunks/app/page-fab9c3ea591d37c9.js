(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8138:(e,a,s)=>{"use strict";let l;s.r(a),s.d(a,{default:()=>h});var t=s(5155),r=s(2115);function o(e){let{costoInicial:a,ganancia:s,gastos:l,publicidad:t,ingresosBrutos:r,costoFijoML:o,mercadolibre:n,costoFinanciero:i,pagoNube:c,iva:d,comisionTiendaNube:m}=e,u=1-(l+t+r+n+i+c*(1+d/100)+m)/100;if(u<=0)throw Error("La suma de los porcentajes es demasiado alta, no se puede calcular el precio final.");return(a+s+o)/u}function n(e){let{onCalculation:a}=e,[s,l]=(0,r.useState)(4800),[n,i]=(0,r.useState)(10),[c,d]=(0,r.useState)(3500),[m,u]=(0,r.useState)(10),[x,b]=(0,r.useState)(5),[p,h]=(0,r.useState)(1800),[g,N]=(0,r.useState)(16),[j,f]=(0,r.useState)(5),[v,y]=(0,r.useState)(5),[C,P]=(0,r.useState)(21),[w,F]=(0,r.useState)(5),[S,I]=(0,r.useState)(null),[k,L]=(0,r.useState)(null),[$,M]=(0,r.useState)(null);return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-md shadow-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Calculadora de Precio"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"flex flex-col",children:["Costo Inicial",(0,t.jsx)("input",{type:"number",value:s,onChange:e=>l(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Gastos (%)",(0,t.jsx)("input",{type:"number",value:n,onChange:e=>i(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Ganancia ($)",(0,t.jsx)("input",{type:"number",value:c,onChange:e=>d(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Publicidad (%)",(0,t.jsx)("input",{type:"number",value:m,onChange:e=>u(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Ingresos Brutos (%)",(0,t.jsx)("input",{type:"number",value:x,onChange:e=>b(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Costo Fijo ML ($)",(0,t.jsx)("input",{type:"number",value:p,onChange:e=>h(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["MercadoLibre (%)",(0,t.jsx)("input",{type:"number",value:g,onChange:e=>N(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Costo Financiero (%)",(0,t.jsx)("input",{type:"number",value:j,onChange:e=>f(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Pago Nube (%)",(0,t.jsx)("input",{type:"number",value:v,onChange:e=>y(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["IVA (%)",(0,t.jsx)("input",{type:"number",value:C,onChange:e=>P(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Comisi\xf3n Tienda Nube (%)",(0,t.jsx)("input",{type:"number",value:w,onChange:e=>F(Number(e.target.value)),className:"mt-1 p-2 border rounded"})]})]}),(0,t.jsx)("button",{onClick:function(){M(null);try{let e=o({costoInicial:s,ganancia:c,gastos:n,publicidad:m,ingresosBrutos:x,costoFijoML:p,mercadolibre:g,costoFinanciero:j,pagoNube:v,iva:C,comisionTiendaNube:w}),l=v*(1+C/100),t={gastosPesos:e*n/100,publicidadPesos:e*m/100,ingresosBrutosPesos:e*x/100,mercadolibrePesos:e*g/100,costoFinancieroPesos:e*j/100,pagoNubePesos:e*l/100,comisionTiendaNubePesos:e*w/100,costoFijoMLPesos:p,totalCostos:0,gananciaNeta:0};t.totalCostos=t.gastosPesos+t.publicidadPesos+t.ingresosBrutosPesos+t.mercadolibrePesos+t.costoFinancieroPesos+t.pagoNubePesos+t.comisionTiendaNubePesos+t.costoFijoMLPesos,t.gananciaNeta=e-t.totalCostos-s,I(e),L(t),a&&a(e,{costoInicial:s,gastos:n,ganancia:c,publicidad:m,ingresosBrutos:x,costoFijoML:p,mercadolibre:g,costoFinanciero:j,pagoNube:v,iva:C,comisionTiendaNube:w})}catch(e){e instanceof Error&&M(e.message),I(null),L(null),a&&a(null,null)}},className:"mt-6 px-4 py-2 bg-black text-white rounded hover:bg-gray-800 transition",children:"Calcular Precio"}),$&&(0,t.jsx)("p",{className:"mt-4 text-red-600",children:$}),null!==S&&!$&&(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold mb-4",children:["Precio Final Calculado: $",S.toFixed(2)]}),k&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Detalle de Costos (en Pesos):"}),(0,t.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["Gastos (",n,"%): $",k.gastosPesos.toFixed(2)]}),(0,t.jsxs)("li",{children:["Publicidad (",m,"%): $",k.publicidadPesos.toFixed(2)]}),(0,t.jsxs)("li",{children:["Ingresos Brutos (",x,"%): $",k.ingresosBrutosPesos.toFixed(2)]}),(0,t.jsxs)("li",{children:["MercadoLibre (",g,"%): $",k.mercadolibrePesos.toFixed(2)]}),(0,t.jsxs)("li",{children:["Costo Financiero (",j,"%): $",k.costoFinancieroPesos.toFixed(2)]}),(0,t.jsxs)("li",{children:["Pago Nube (",v,"% + ",C,"% IVA): $",k.pagoNubePesos.toFixed(2)]}),(0,t.jsxs)("li",{children:["Comisi\xf3n Tienda Nube (",w,"%): $",k.comisionTiendaNubePesos.toFixed(2)]}),(0,t.jsxs)("li",{children:["Costo Fijo ML: $",k.costoFijoMLPesos.toFixed(2)]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Resumen:"}),(0,t.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["Precio de Venta: $",S.toFixed(2)]}),(0,t.jsxs)("li",{children:["Total Costos: $",k.totalCostos.toFixed(2)]}),(0,t.jsxs)("li",{children:["Costo Inicial: $",s.toFixed(2)]}),(0,t.jsxs)("li",{className:"font-semibold border-t pt-1",children:["Ganancia Neta: $",k.gananciaNeta.toFixed(2)]}),(0,t.jsxs)("li",{className:"text-xs text-gray-600",children:["Ganancia Esperada: $",c.toFixed(2)]})]})]})]})]})})]})}function i(e){let{onAddProduct:a,calculatedPrice:s,calculationParams:l}=e,[o,n]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[d,m]=(0,r.useState)("minorista"),[u,x]=(0,r.useState)(null),[b,p]=(0,r.useState)(null);return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-md shadow-md mt-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Registrar Producto"}),s&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:[(0,t.jsxs)("p",{className:"text-green-800 font-medium",children:["Precio calculado disponible: $",s.toFixed(2)]}),(0,t.jsx)("p",{className:"text-green-600 text-sm",children:"Este precio y sus par\xe1metros se guardar\xe1n autom\xe1ticamente con el producto."})]}),(0,t.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),x(null),p(null),!o.trim()||!i.trim())return void x("Por favor, complete ambos campos: c\xf3digo y nombre.");a({code:o.trim(),name:i.trim(),type:d,price:s||void 0,calculationParams:l||void 0}),n(""),c(""),p("Producto registrado correctamente.")},className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{htmlFor:"code",className:"mb-1 font-medium",children:"C\xf3digo"}),(0,t.jsx)("input",{id:"code",type:"text",value:o,onChange:e=>n(e.target.value),className:"p-2 border rounded"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{htmlFor:"name",className:"mb-1 font-medium",children:"Nombre"}),(0,t.jsx)("input",{id:"name",type:"text",value:i,onChange:e=>c(e.target.value),className:"p-2 border rounded"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{htmlFor:"type",className:"mb-1 font-medium",children:"Tipo"}),(0,t.jsxs)("select",{id:"type",value:d,onChange:e=>m(e.target.value),className:"p-2 border rounded",children:[(0,t.jsx)("option",{value:"minorista",children:"Minorista"}),(0,t.jsx)("option",{value:"mayorista",children:"Mayorista"})]})]}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded hover:bg-gray-800 transition",children:"Agregar Producto"})]}),u&&(0,t.jsx)("p",{className:"mt-4 text-red-600",children:u}),b&&(0,t.jsx)("p",{className:"mt-4 text-green-600",children:b})]})}function c(e){let{products:a,onUpdateProduct:s,onDeleteProduct:l}=e,[n,i]=(0,r.useState)("minorista"),[c,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(null),[b,p]=(0,r.useState)({code:"",name:"",price:""}),[h,g]=(0,r.useState)(null),N=a.filter(e=>e.type===n).filter(e=>e.code.toLowerCase().includes(c.toLowerCase())||e.name.toLowerCase().includes(c.toLowerCase()));function j(){u&&(s(u,{code:b.code,name:b.name,price:b.price?parseFloat(b.price):void 0}),x(null),p({code:"",name:"",price:""}))}function f(){x(null),p({code:"",name:"",price:""})}return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-6 bg-white rounded-md shadow-md mt-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Gesti\xf3n de Productos"}),(0,t.jsxs)("div",{className:"flex border-b mb-4",children:[(0,t.jsx)("button",{onClick:()=>i("minorista"),className:"px-4 py-2 font-medium ".concat("minorista"===n?"border-b-2 border-black text-black":"text-gray-600 hover:text-black"),children:"Minorista"}),(0,t.jsx)("button",{onClick:()=>i("mayorista"),className:"px-4 py-2 font-medium ".concat("mayorista"===n?"border-b-2 border-black text-black":"text-gray-600 hover:text-black"),children:"Mayorista"})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Buscar por c\xf3digo o nombre...",value:c,onChange:e=>m(e.target.value),className:"flex-1 p-2 border rounded"}),(0,t.jsx)("button",{onClick:function(){let e=new Blob([["C\xf3digo,Nombre,Precio,Tipo",...N.map(e=>"".concat(e.code,",").concat(e.name,",").concat(e.price||"",",").concat(e.type))].join("\n")],{type:"text/csv"}),a=window.URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download="productos_".concat(n,".csv"),s.click(),window.URL.revokeObjectURL(a)},className:"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700 transition",children:"Exportar Listado"})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100",children:[(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"C\xf3digo"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Nombre"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Precio"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Par\xe1metros"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:0===N.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:5,className:"border border-gray-300 px-4 py-8 text-center text-gray-500",children:["No hay productos registrados en ",n]})}):N.map(e=>(0,t.jsxs)(r.Fragment,{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:u===e.id?(0,t.jsx)("input",{type:"text",value:b.code,onChange:e=>p({...b,code:e.target.value}),className:"w-full p-1 border rounded"}):e.code}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:u===e.id?(0,t.jsx)("input",{type:"text",value:b.name,onChange:e=>p({...b,name:e.target.value}),className:"w-full p-1 border rounded"}):e.name}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:u===e.id?(0,t.jsx)("input",{type:"number",value:b.price,onChange:e=>p({...b,price:e.target.value}),className:"w-full p-1 border rounded",placeholder:"Precio"}):e.price?"$".concat(e.price.toFixed(2)):"Sin precio"}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.calculationParams?(0,t.jsx)("button",{onClick:()=>g(h===e.id?null:e.id),className:"px-2 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:h===e.id?"Ocultar":"Ver Detalle"}):(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Sin par\xe1metros"})}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:u===e.id?(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:j,className:"px-2 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Guardar"}),(0,t.jsx)("button",{onClick:f,className:"px-2 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Cancelar"})]}):(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{var a;x(e.id),p({code:e.code,name:e.name,price:(null==(a=e.price)?void 0:a.toString())||""})},className:"px-2 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Editar"}),(0,t.jsx)("button",{onClick:()=>l(e.id),className:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Eliminar"})]})})]}),h===e.id&&e.calculationParams&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"border border-gray-300 px-4 py-4 bg-gray-50",children:(0,t.jsx)(d,{product:e,onUpdate:a=>{let l=o(a);s(e.id,{calculationParams:a,price:l})}})})})]},e.id))})]})})]})}function d(e){let{product:a,onUpdate:s}=e,[l,o]=(0,r.useState)(!1),[n,i]=(0,r.useState)(a.calculationParams),[c,d]=(0,r.useState)(null);return l?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Editar Par\xe1metros de C\xe1lculo"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:function(){d(null);try{s(n),o(!1)}catch(e){e instanceof Error&&d(e.message)}},className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Guardar"}),(0,t.jsx)("button",{onClick:function(){i(a.calculationParams),o(!1),d(null)},className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Cancelar"})]})]}),c&&(0,t.jsx)("p",{className:"text-red-600 text-sm mb-4",children:c}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Costo Inicial"}),(0,t.jsx)("input",{type:"number",value:n.costoInicial,onChange:e=>i({...n,costoInicial:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Gastos (%)"}),(0,t.jsx)("input",{type:"number",value:n.gastos,onChange:e=>i({...n,gastos:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Ganancia ($)"}),(0,t.jsx)("input",{type:"number",value:n.ganancia,onChange:e=>i({...n,ganancia:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Publicidad (%)"}),(0,t.jsx)("input",{type:"number",value:n.publicidad,onChange:e=>i({...n,publicidad:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Ingresos Brutos (%)"}),(0,t.jsx)("input",{type:"number",value:n.ingresosBrutos,onChange:e=>i({...n,ingresosBrutos:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Costo Fijo ML ($)"}),(0,t.jsx)("input",{type:"number",value:n.costoFijoML,onChange:e=>i({...n,costoFijoML:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"MercadoLibre (%)"}),(0,t.jsx)("input",{type:"number",value:n.mercadolibre,onChange:e=>i({...n,mercadolibre:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Costo Financiero (%)"}),(0,t.jsx)("input",{type:"number",value:n.costoFinanciero,onChange:e=>i({...n,costoFinanciero:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Pago Nube (%)"}),(0,t.jsx)("input",{type:"number",value:n.pagoNube,onChange:e=>i({...n,pagoNube:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"IVA (%)"}),(0,t.jsx)("input",{type:"number",value:n.iva,onChange:e=>i({...n,iva:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Comisi\xf3n Tienda Nube (%)"}),(0,t.jsx)("input",{type:"number",value:n.comisionTiendaNube,onChange:e=>i({...n,comisionTiendaNube:Number(e.target.value)}),className:"mt-1 p-2 border rounded text-sm"})]})]})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Par\xe1metros de C\xe1lculo"}),(0,t.jsx)("button",{onClick:()=>o(!0),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Editar Par\xe1metros"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["Costo Inicial: $",a.calculationParams.costoInicial]}),(0,t.jsxs)("li",{children:["Gastos: ",a.calculationParams.gastos,"%"]}),(0,t.jsxs)("li",{children:["Ganancia: $",a.calculationParams.ganancia]}),(0,t.jsxs)("li",{children:["Publicidad: ",a.calculationParams.publicidad,"%"]}),(0,t.jsxs)("li",{children:["Ingresos Brutos: ",a.calculationParams.ingresosBrutos,"%"]}),(0,t.jsxs)("li",{children:["Costo Fijo ML: $",a.calculationParams.costoFijoML]})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["MercadoLibre: ",a.calculationParams.mercadolibre,"%"]}),(0,t.jsxs)("li",{children:["Costo Financiero: ",a.calculationParams.costoFinanciero,"%"]}),(0,t.jsxs)("li",{children:["Pago Nube: ",a.calculationParams.pagoNube,"%"]}),(0,t.jsxs)("li",{children:["IVA: ",a.calculationParams.iva,"%"]}),(0,t.jsxs)("li",{children:["Comisi\xf3n Tienda Nube: ",a.calculationParams.comisionTiendaNube,"%"]})]})})]})]})}function m(e){let{products:a,onUpdateProducts:s}=e,[l,n]=(0,r.useState)(!1),[i,c]=(0,r.useState)({costoInicial:4800,gastos:10,ganancia:3500,publicidad:10,ingresosBrutos:5,costoFijoML:1800,mercadolibre:16,costoFinanciero:5,pagoNube:5,iva:21,comisionTiendaNube:5}),[d,m]=(0,r.useState)("all"),[u,x]=(0,r.useState)(null),[b,p]=(0,r.useState)(null);return l?(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-6 bg-white rounded-md shadow-md mt-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Edici\xf3n Masiva de Par\xe1metros"}),(0,t.jsx)("button",{onClick:()=>n(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"Cerrar"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Aplicar cambios a:"}),(0,t.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"p-2 border rounded",children:[(0,t.jsx)("option",{value:"all",children:"Todos los productos"}),(0,t.jsx)("option",{value:"minorista",children:"Solo productos minoristas"}),(0,t.jsx)("option",{value:"mayorista",children:"Solo productos mayoristas"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,t.jsxs)("label",{className:"flex flex-col",children:["Costo Inicial (solo para referencia)",(0,t.jsx)("input",{type:"number",value:i.costoInicial,onChange:e=>c({...i,costoInicial:Number(e.target.value)}),className:"mt-1 p-2 border rounded bg-gray-100",disabled:!0}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"Cada producto mantendr\xe1 su costo inicial original"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Gastos (%)",(0,t.jsx)("input",{type:"number",value:i.gastos,onChange:e=>c({...i,gastos:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Ganancia ($)",(0,t.jsx)("input",{type:"number",value:i.ganancia,onChange:e=>c({...i,ganancia:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Publicidad (%)",(0,t.jsx)("input",{type:"number",value:i.publicidad,onChange:e=>c({...i,publicidad:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Ingresos Brutos (%)",(0,t.jsx)("input",{type:"number",value:i.ingresosBrutos,onChange:e=>c({...i,ingresosBrutos:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Costo Fijo ML ($)",(0,t.jsx)("input",{type:"number",value:i.costoFijoML,onChange:e=>c({...i,costoFijoML:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["MercadoLibre (%)",(0,t.jsx)("input",{type:"number",value:i.mercadolibre,onChange:e=>c({...i,mercadolibre:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Costo Financiero (%)",(0,t.jsx)("input",{type:"number",value:i.costoFinanciero,onChange:e=>c({...i,costoFinanciero:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Pago Nube (%)",(0,t.jsx)("input",{type:"number",value:i.pagoNube,onChange:e=>c({...i,pagoNube:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["IVA (%)",(0,t.jsx)("input",{type:"number",value:i.iva,onChange:e=>c({...i,iva:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:["Comisi\xf3n Tienda Nube (%)",(0,t.jsx)("input",{type:"number",value:i.comisionTiendaNube,onChange:e=>c({...i,comisionTiendaNube:Number(e.target.value)}),className:"mt-1 p-2 border rounded"})]})]}),(0,t.jsx)("div",{className:"flex gap-4 mb-4",children:(0,t.jsx)("button",{onClick:function(){x(null),p(null);try{let e=a.map(e=>{if("all"!==d&&e.type!==d||!e.calculationParams)return e;let a={...i,costoInicial:e.calculationParams.costoInicial},s=o(a);return{...e,price:s,calculationParams:a}});s(e);let l=a.filter(e=>("all"===d||e.type===d)&&e.calculationParams).length;p("Se actualizaron ".concat(l," productos correctamente."))}catch(e){e instanceof Error&&x(e.message)}},className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition",children:"Aplicar Cambios Masivos"})}),u&&(0,t.jsx)("p",{className:"text-red-600 mb-4",children:u}),b&&(0,t.jsx)("p",{className:"text-green-600 mb-4",children:b}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Vista Previa:"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Productos que ser\xe1n afectados: ",a.filter(e=>("all"===d||e.type===d)&&e.calculationParams).length]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("strong",{children:"Nota:"})," El costo inicial de cada producto se mantendr\xe1, solo se actualizar\xe1n los dem\xe1s par\xe1metros."]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Ejemplo de precio con par\xe1metros nuevos: $",(()=>{try{return o(i).toFixed(2)}catch(e){return"Error en c\xe1lculo"}})()," (usando costo inicial de ejemplo: $",i.costoInicial,")"]})]})]}):(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-6 bg-white rounded-md shadow-md mt-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Edici\xf3n Masiva de Par\xe1metros"}),(0,t.jsx)("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Abrir Editor Masivo"})]}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Modifica par\xe1metros de c\xe1lculo y actualiza precios de m\xfaltiples productos a la vez."})]})}let u={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},x=new Uint8Array(16),b=[];for(let e=0;e<256;++e)b.push((e+256).toString(16).slice(1));let p=function(e,a,s){if(u.randomUUID&&!a&&!e)return u.randomUUID();let t=(e=e||{}).random??e.rng?.()??function(){if(!l){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l=crypto.getRandomValues.bind(crypto)}return l(x)}();if(t.length<16)throw Error("Random bytes length must be >= 16");if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,a){if((s=s||0)<0||s+16>a.length)throw RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let e=0;e<16;++e)a[s+e]=t[e];return a}return function(e,a=0){return(b[e[a+0]]+b[e[a+1]]+b[e[a+2]]+b[e[a+3]]+"-"+b[e[a+4]]+b[e[a+5]]+"-"+b[e[a+6]]+b[e[a+7]]+"-"+b[e[a+8]]+b[e[a+9]]+"-"+b[e[a+10]]+b[e[a+11]]+b[e[a+12]]+b[e[a+13]]+b[e[a+14]]+b[e[a+15]]).toLowerCase()}(t)};function h(){let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)({price:null,params:null});return(0,r.useEffect)(()=>{let e=localStorage.getItem("products");e&&a(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("products",JSON.stringify(e))},[e]),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Sistema de Calculadora y Gesti\xf3n de Productos"}),(0,t.jsx)(n,{onCalculation:(e,a)=>l({price:e,params:a})}),(0,t.jsx)(i,{onAddProduct:function(e){let s={id:p(),code:e.code,name:e.name,type:e.type,price:e.price,calculationParams:e.calculationParams};a(e=>[...e,s])},calculatedPrice:s.price,calculationParams:s.params}),(0,t.jsx)(m,{products:e,onUpdateProducts:function(e){a(e)}}),(0,t.jsx)(c,{products:e,onUpdateProduct:function(e,s){a(a=>a.map(a=>a.id===e?{...a,...s}:a))},onDeleteProduct:function(e){a(a=>a.filter(a=>a.id!==e))}})]})}},9766:(e,a,s)=>{Promise.resolve().then(s.bind(s,8138))}},e=>{var a=a=>e(e.s=a);e.O(0,[441,684,358],()=>a(9766)),_N_E=e.O()}]);